<!DOCTYPE html>
<html>
<head>
  <title>User List</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function() {
      // Thêm user
      $('#addUserForm').submit(function(e) {
        e.preventDefault();
        const form = $(this);
        const url = form.attr('action');
        const data = form.serialize();
        $.ajax({
          type: 'POST',
          url,
          data,
          success: function() {
            window.location.reload();
          },
          error: function(err) {
            console.error(err);
          }
        });
      });

      // Xóa user
      $('.deleteUserBtn').click(function() {
        const userId = $(this).data('userid');
        $.ajax({
          type: 'DELETE',
          url: `/users/${userId}`,
          success: function() {
            window.location.reload();
          },
          error: function(err) {
            console.error(err);
          }
        });
      });
    });
  </script>
</head>
<body>
  <h1>User List</h1>
  <ul>
    <% users.forEach(function(user) { %>
      <li>
        <%= user.Username %> - <%= user.Fullname %> - <%= user.Address %>
        <button class="deleteUserBtn" data-userid="<%= user.UserId %>">Delete</button>
      </li>
    <% }); %>
  </ul>
  <h2>Add User</h2>
  <form id="addUserForm" action="/users" method="POST">
    <label for="UserId">User ID: </label>
    <input type="text" name="UserId" required><br>
    <label for="Username">Username: </label>
    <input type="text" name="Username" required><br>
    <label for="Fullname">Fullname: </label>
    <input type="text" name="Fullname" required><br>
    <label for="Address">Address: </label>
    <input type="text" name="Address" required><br>
    <button type="submit">Add User</button>
  </form>
</body>
</html>