<!DOCTYPE html>
<html>
<head>
    <title>User List</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Hàm thêm user
        function addUser() {
            const userId = $('#userId').val();
            const username = $('#username').val();
            const fullname = $('#fullname').val();
            const address = $('#address').val();

            $.ajax({
                url: '/users',
                type: 'POST',
                data: { UserId: userId, Username: username, Fullname: fullname, Address: address },
                success: function(result) {
                    location.reload();
                },
                error: function(err) {
                    console.log(err);
                }
            });
        }

        // Hàm xóa user
        function removeUser(userId) {
            $.ajax({
                url: '/users/' + userId,
                type: 'DELETE',
                success: function(result) {
                    location.reload();
                },
                error: function(err) {
                    console.log(err);
                }
            });
        }
    </script>
</head>
<body>
    <h1>User List</h1>

    <!-- Form thêm user -->
    <form>
        <input type="text" id="userId" placeholder="User ID" required>
        <input type="text" id="username" placeholder="Username" required>
        <input type="text" id="fullname" placeholder="Fullname" required>
        <input type="text" id="address" placeholder="Address" required>
        <button type="button" onclick="addUser()">Add User</button>
    </form>

    <!-- Hiển thị danh sách user -->
    <ul id="userList">
        <% users.forEach(function(user) { %>
            <li>
                <span><%= user.UserId %></span>
                <span><%= user.Username %></span>
                <span><%= user.Fullname %></span>
                <span><%= user.Address %></span>
                <span><button onclick="removeUser('<%= user._id %>')">Delete</button></span>
            </li>
        <% }); %>
    </ul>
</body>
</html>